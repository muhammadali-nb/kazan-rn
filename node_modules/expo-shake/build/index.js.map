{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,aAAa,EAAE,MAAM,cAAc,CAAC;AAE7C,MAAM,iBAAiB,GAAG,GAAG,CAAC;AAE9B,MAAM,UAAU,WAAW,CAAC,OAAmB;IAC7C,IAAI,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;IAC3B,IAAI,UAAU,GAAG,CAAC,CAAC;IACnB,OAAO,aAAa,CAAC,WAAW,CAAC,iBAAiB,CAAC,EAAE;QACnD,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,iBAAiB,CAAC;QACpC,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QAC1B,IAAI,QAAQ,GAAG,UAAU,GAAG,GAAG,EAAE;YAC/B,IAAI,QAAQ,GAAG,QAAQ,GAAG,UAAU,CAAC;YACrC,UAAU,GAAG,QAAQ,CAAC;YACtB,IAAI,KAAK,GACP,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,MAAM,GAAG,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC;YACtE,IAAI,KAAK,GAAG,iBAAiB,EAAE;gBAC7B,OAAO,EAAE,CAAC;aACX;YACD,MAAM,GAAG,CAAC,CAAC;YACX,MAAM,GAAG,CAAC,CAAC;YACX,MAAM,GAAG,CAAC,CAAC;SACZ;IACH,CAAC,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,MAAM,kBAAkB,GAAG,aAAa,CAAC,kBAAkB,CAAC","sourcesContent":["import { Subscription } from '@unimodules/core';\nimport { Accelerometer } from 'expo-sensors';\n\nconst DEFAULT_THRESHOLD = 150;\n\nexport function addListener(handler: () => void): Subscription {\n  let last_x, last_y, last_z;\n  let lastUpdate = 0;\n  return Accelerometer.addListener(accelerometerData => {\n    let { x, y, z } = accelerometerData;\n    let currTime = Date.now();\n    if (currTime - lastUpdate > 100) {\n      let diffTime = currTime - lastUpdate;\n      lastUpdate = currTime;\n      let speed =\n        (Math.abs(x + y + z - last_x - last_y - last_z) / diffTime) * 10000;\n      if (speed > DEFAULT_THRESHOLD) {\n        handler();\n      }\n      last_x = x;\n      last_y = y;\n      last_z = z;\n    }\n  });\n}\n\nexport const removeSubscription = Accelerometer.removeSubscription;\n"]}